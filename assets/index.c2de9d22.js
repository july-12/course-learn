import{r as l,u as f,c as s,j as e,f as b,z as L}from"./vendor.9af9b269.js";import{u as C,h as k,L as R,I as B,R as S}from"./index.d4f76746.js";import{l as p,E as n}from"./index.00b637e9.js";const T=()=>{const[h,y]=l.exports.useState([]),[c,g]=l.exports.useState(),[r,x]=l.exports.useState(localStorage.getItem(p)||n.LIST),{state:{currentUser:o,myRegisters:I}}=C(),d=f(),u=l.exports.useCallback(async()=>{if(o!=null&&o.phone){const{courseList:t,totalNum:a}=await k(o==null?void 0:o.phone);y(t),g(a)}},[o==null?void 0:o.phone]);if(l.exports.useEffect(()=>{u()},[u]),!(o!=null&&o.phone))return d("/"),null;const v=t=>{const a=L(I,({courseId:N})=>N===t.courseId),i=a.status,w=`https://room.loongsonedu.cn?username=${a.name}&userId=${o.phone}&role=${S[i]||"student"}&roomId=${t.roomId}&video=${t.ishd||"480"}p`;window.open(w)},m=r===n.GRID;return s("div",{className:"mycourse-list-wrapper",children:[s("header",{children:[e("div",{className:"title",children:"\u6211\u7684\u8BFE\u7A0B"}),s("div",{className:"totol-register-count",children:["\u5171\u62A5\u540D\u8BFE\u7A0B: ",e("strong",{children:c})]})]}),c===void 0?e(R,{}):s("div",{className:`mycourse-list ${m?"mycourse-list-layout-grid":"mycourse-list-layout-list"}`,children:[e("span",{className:"layout-icon",onClick:()=>{const t=m?n.LIST:n.GRID;x(t),localStorage.setItem(p,t)},children:e(B,{symbol:r===n.GRID?"icon-listgrid":"icon-list"})}),b(h,(t,a)=>s("div",{className:"course-item",onClick:()=>d(`/${t.courseId}`),children:[e("img",{className:"course-item-cover",src:t.coverUrl,alt:"cover"}),s("div",{className:"course-item-content",children:[s("div",{children:[e("h3",{children:t.title}),e("div",{className:"summary",children:t.summary})]}),s("div",{className:"room",children:[s("span",{children:[" \u6559\u5BA4\u53F7: ",t.roomId," "]}),e("button",{className:"btn enter-class-btn",onClick:i=>{i.stopPropagation(),v(t)},children:"\u8FDB\u5165\u8BFE\u5802"})]})]})]},t.id+t.courseIndex+t.title+a))]})]})};export{T as default};
